"use strict";define(["jquery","jqcookie"],function(p){return{small_pic:p("#small_pic"),small_box:p("#small_box"),smallf:document.querySelector("#smallf"),bigf:p(".bigf"),big_pic:p("#big_pic"),list:p("article .list"),fdj:function(){var l=this,i=this.small_pic.width()*this.bigf.width()/this.big_pic.width(),e=this.small_pic.height()*this.bigf.height()/this.big_pic.height();this.smallf.style.width=i+"px",this.smallf.style.height=e+"px";var s=this.big_pic.width()/this.small_pic.width();this.small_box.hover(function(){l.bigf.show(),p(l.smallf).show(),p(document).on("mousemove",function(i){var e=i.pageX-p(l.smallf).width()/2-p(l.small_pic).offset().left,t=i.pageY-p(l.smallf).height()/2-p(l.small_pic).offset().top;e<=0?e=0:e>=l.small_pic.width()-l.smallf.offsetWidth&&(e=l.small_pic.width()-l.smallf.offsetWidth),t<=0?t=0:t>=l.small_pic.height()-l.smallf.offsetHeight&&(t=l.small_pic.height()-l.smallf.offsetHeight),l.smallf.style.left=e+"px",l.smallf.style.top=t+"px",l.big_pic.get(0).style.left=-e*s+"px",l.big_pic.get(0).style.top=-t*s+"px"}),p(document).off("mouseover",function(){l.small_box.off(),p(document).off()})},function(){l.bigf.hide(),p(l.smallf).hide()})},clickChange:function(){var e=this;this.list.on("mouseover",function(i){"IMG"===i.target.nodeName&&(e.small_pic.attr("src",i.target.src.replace("small","large").replace("S.jpg","L.jpg")),p(".list img").removeClass("active"),p(i.target).addClass("active"))})},chooseGood:function(){p("aside .choose").on("click",function(i){"IMG"===i.target.nodeName||"SPAN"===i.target.nodeName?(p("aside .choose div").removeClass("active"),p(i.target).parent().addClass("active")):p(i.target).is(".color_content")&&(p("aside .choose div").removeClass("active"),p(i.target).addClass("active"))})},chooseSize:function(){p(".size").on("click",function(i){"SPAN"===i.target.nodeName&&(p(".size span").removeClass("active"),p(i.target).addClass("active"))})},changeNum:function(){p(".num .up").on("click",function(){p(".num input").val(+p(".num input").val()+1)}),p(".num .down").on("click",function(){1==p(".num input").val()?p(".num input").val(1):p(".num input").val(+p(".num input").val()-1)})},slideGood:function(){var e=0;p(".slon").on("click",function(){var i=p(".list ul li").innerHeight();e=0==e?0:--e,p(".list ul").get(0).style.left=-e*i+"px",console.log(e)}),p(".sron").on("click",function(){var i=p(".list ul li").innerHeight();e=6<p(".list ul li").length?e==p(".list ul li").length-7?p(".list ul li").length-7:++e:0,p(".list ul").get(0).style.left=-e*i+"px"})},addCart:function(){p(".addCart").on("click",function(){if(p.cookie("sid")){var i=function(){p.cookie("sid",t,{expires:7,path:"/"}),p.cookie("color",l,{expires:7,path:"/"}),p.cookie("size",s,{expires:7,path:"/"}),p.cookie("num",o,{expires:7,path:"/"})},e=function(){t.push(location.search.replace("?sid=","")),l.push(p(".color .active span").html()),s.push(p(".size .active").html()),o.push(p(".num input").val())},t=p.cookie("sid").split(","),l=p.cookie("color").split(","),s=p.cookie("size").split(","),o=p.cookie("num").split(","),a=!1,c=!1,n=!1,h=null;p.each(t,function(i,e){if(e==location.search.replace("?sid=","")&&(l[i]==p(".color .active span").html()&&(a=!0),s[i]==p(".size .active").html()&&(c=!0),l[i]==p(".color .active span").html()&&s[i]==p(".size .active").html()))return h=i,c=a=!(n=!0)}),-1!=t.indexOf(location.search.replace("?sid=",""))?a?(e(),i()):c?(e(),i()):n?(o[h]=Number(o[h])+Number(p(".num input").val()),p.cookie("num",o,{expires:7,path:"/"})):(e(),i()):(e(),i())}else p.cookie("sid",location.search.replace("?sid=",""),{expires:7,path:"/"}),p.cookie("color",p(".color .active span").html(),{expires:7,path:"/"}),p.cookie("size",p(".size .active").html(),{expires:7,path:"/"}),p.cookie("num",p(".num input").val(),{expires:7,path:"/"})})}}});