"use strict";define("render.js",["jquery"],function(){return{index_render:function(){var e=this;$.ajax({url:"../php/data.php",dataType:"json"}).done(function(n){e.chooseRender(n,"文艺女装",$("#main .literature"),0),e.chooseRender(n,"优雅女装",$("#main .grace"),1),e.chooseRender(n,"活泼女装",$("#main .lively"),2),e.chooseRender(n,"简约女装",$("#main .simplicity"),3),e.chooseRender(n,"度假女装",$("#main .vacation"),4),e.chooseRender(n,"舒适内衣",$("#main .underwear"),5),e.chooseRender(n,"品质男装",$("#main .mens"),6),e.chooseRender(n,"箱包品类",$("#main .package"),7),e.indexCart(n),$(function(){$("img.lazy").lazyload({effect:"fadeIn"})})})},chooseRender:function(n,e,t,i){var a="<ul>";$.each(["文艺女装","优雅女装","活泼女装","简约女装","度假女装","舒适内衣","品质男装","箱包品类"],function(n,e){a+=i==n?"<li><a href=\"javascript:void(0);\" class='active'>"+e+"</a></li>":'<li><a href="javascript:void(0);">'+e+"</a></li>"}),a+="</ul>";var o=!0,s=!1,c=void 0;try{for(var l,r=n[Symbol.iterator]();!(o=(l=r.next()).done);o=!0){var d=l.value;d.type===e&&(a+='\n                    <div class="good">\n                    <a href="details.html?sid='+d.sid+'" target=\'_blank\'>\n                        <img class="lazy"\n                            data-original="'+d.small_url+'"\n                            width="225" height="304">\n                    </a>\n                    <div>\n                        <a href="">￥'+d.new_price+'</a>\n                        <a href="">￥'+d.old_price+"</a>\n                    </div>\n                </div>")}}catch(n){s=!0,c=n}finally{try{!o&&r.return&&r.return()}finally{if(s)throw c}}t.html(a)},details_render:function(){var n=location.search.replace("?","");$.ajax({url:"../php/check_good.php?"+n,dataType:"json"}).done(function(n){var t,e,i,a,o,s,c,l;$("#store").html(n.store),$("#small_pic").attr({src:n.small_url}),$("title").html(n.title),$("#big_pic").attr({src:n.small_url.replace("large","huge").replace("L.jpg","H.jpg")}),$("#detail main article .list ul").html((t="",e=n.urls.split(","),$.each(e,function(n,e){t+=0===n?'\n                            <li><img src="'+e+'S.jpg" alt="" class=\'active\'></li>\n                            ':'\n                        <li><img src="'+e+'S.jpg" alt=""></li>\n                        '}),t)),$("#detail h2").html(n.title),$("#detail .new_price").html("￥"+n.new_price),$("#detail .old_price").html("￥"+n.old_price),$("#detail .choose").html((a="",o=(i=n).color.split(","),s=i.urls_good.split(","),$.each(o,function(n,e){a+=0===n?'\n                            <div class="color_content active">\n                                <img src="'+s[n]+'" alt="">\n                                <span>'+e+"</span>\n                            </div>\n                        ":'\n                        <div class="color_content">\n                            <img src="'+s[n]+'" alt="">\n                        <span>'+e+"</span>\n                        </div>\n                        "}),a)),$("#detail .size div").html((c="",l=n.size.split(","),$.each(l,function(n,e){c+=0===n?"\n                            <span class='active'>"+e+"</span>\n                        ":"\n                            <span>"+e+"</span>\n                        "}),c)),$(function(){$("img.lazy").lazyload({effect:"fadeIn"})})})},cart_render:function(n,e,t){if($.cookie("sid")){var i=Array.from(new Set($.cookie("sid").split(","))).map(function(n){return+n}).sort(function(n,e){return n-e}),s=$.cookie("sid").split(","),c=$.cookie("color").split(","),l=$.cookie("size").split(","),r=$.cookie("num").split(",");$.ajax({url:"../php/cart.php?sid="+i,type:"get",dataType:"json"}).done(function(o){$.each(i,function(t,i){var a='\n                        <aside>\n                        <div class="title">\n                            <p>以下商品由 <span>'+o[t].store+"</span> 发货 免配送费</p>\n                        </div>\n                        ";$.each(s,function(n,e){i==e&&(o[t].new_price*r[t],a+='\n                                <div class="shop_content">\n                                    <input type="checkbox" class="choose">\n                                    <div class="good_info">\n                                        <img src="'+o[t].small_url+'" alt="">\n                                        <p>'+o[t].title+"</p>\n                                        <div>\n                                            <p>品牌:"+o[t].store+"</p>\n                                            <p class='cSize'>尺寸:"+l[n]+"</p>\n                                            <p class='cColor'>颜色:"+c[n]+'</p>\n                                        </div>\n                                    </div>\n                                    <p class="single_price">￥'+o[t].new_price+'</p>\n                                    <div class="number">\n                                        <button class="del">-</button>\n                                        <input type="text" class="good_num" value="'+r[n]+'">\n                                        <button class="add">+</button>\n                                    </div>\n                                    <p class="total_price">￥'+o[t].new_price*r[n]+'</p>\n                                    <div class="opecation">\n                                        <button class="remove">移除</button>\n                                    </div>\n                                </div>\n                            ')}),a+="</aside>",$(".good_content").html($(".good_content").html()+a);$.each(r,function(n,e){+e}),$(".deal").html('\n                        <div>\n                            <p>商品数量总计: <span class="sum"></span>\n                            <span>件 折后商品金额总计</span>\n                            <span id="total_price">￥</span>\n                            </p>\n                        </div>\n                        <div>\n                            <button class=\'settle\'>去结算</button>\n                        </div>\n                        ')}),e(),t(),n()})}else $(".deal").html("\n                    <p class='empty'>您的购物车空空如也,快去挑选一些商品吧</p>\n                    <a href='index.html'>去首页</a>\n                ")},indexCart:function(a){if($.cookie("sid")){var n=Array.from(new Set($.cookie("sid").split(","))).map(function(n){return+n}).sort(function(n,e){return n-e}),e=$.cookie("sid").split(","),o=$.cookie("color").split(","),s=$.cookie("size").split(","),c=$.cookie("num").split(","),l="",r=0;$.each(n,function(t,i){l+='\n                        <div class="good_content">\n                        <p class="store">'+a[t].title+"</p>\n                    ",$.each(e,function(n,e){i==e&&(r+=c[n]*a[t].new_price,l+='\n                                <div class="shop_content">\n                                <div class="onegood">\n                                    <img src="'+a[t].small_url+'" alt="">\n                                    <div class="info">\n                                        <p class="shoptitle">'+a[t].title+'</p>\n                                        <div class="colorinfo">\n                                            <span>'+s[n]+"</span>\n                                            <span>"+o[n]+'</span>\n                                        </div>\n                                        <div class="priceinfo">\n                                            <span class="goodprice">￥'+a[t].new_price+'</span>\n                                            <span class="goodnum">*'+c[n]+"</span>\n                                        </div>\n                                    </div>\n                                </div>\n                        ")}),l+="</div>"}),$(".indexCart").html(l),$(".counting").html('\n                <div>\n                <span class="goodNum">共'+c.map(function(n){return+n}).reduce(function(n,e){return n+e})+'件商品</span>\n                <span class="goodPrice">￥'+r+'</span>\n                </div>\n                <a href="cart.html" class="totalPrice">去购物车结算</a>\n                ')}else $(".indexCart").html(""),$(".counting").html("")}}}),define("index_effect",["./render.js","jquery","jqcookie","lazyload"],function(n,c){return{init:function(){c("#list").load("session.html"),c("#footer").load("index_footer.html"),this.louti(),this.isLogin(),this.logout(),this.search(),this.searchGood(),this.showChat(),this.rightSidebar(),this.weChat(),this.loginBox(),n.index_render()},louti:function(){c("#main section").on("click",function(n){if("A"==n.target.nodeName){var e=c("#main section").eq(c(n.target).parent().index()).offset().top;c("html,body").animate({scrollTop:e},500)}})},isLogin:function(){var e=this;if(+c.cookie("flag")){var n=/^1[3,4,5,7,8]\d{9}$/.test(c.cookie("username"))?"phone":"email";c.ajax({type:"post",data:n+"="+c.cookie("username")+"&password="+c.cookie("password"),url:"../php/check_login.php"}).done(function(n){n?(c.cookie("flag",1,{expires:7,path:"/"}),e.changeHead()):c.cookie("flag",0,{expires:7,path:"/"})})}else c.cookie("flag",0,{expires:7,path:"/"}),e.changeHead()},changeHead:function(){+c.cookie("flag")?(c(".login").html("<a href='login.html'>欢迎您,"+c.cookie("username")+"</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href='javascript:;'>我的梦芭莎</a>"),c(".register").html("<a href=\"javascript:;\" class='logout'>退出</a>")):(c(".login").html('<a href="login.html" class="loginaddress">登录</a>'),c(".register").html('<a href="register.html">注册</a>'))},logout:function(){c("header ul").on("click",function(n){c(n.target).is(".logout")&&(c.cookie("username","",{expires:-1,path:"/"}),c.cookie("password","",{expires:-1,path:"/"}),c.cookie("flag","0",{expires:7,path:"/"}),location.reload())})},search:function(){c(".search_value").on("input",function(){c.ajax({url:"https://suggest.taobao.com/sug?code=utf-8&q="+c(".search_value").val()+"&_ksTS=1569402939975_317&callback=taobao&k=1&area=c2c&bucketid=15",dataType:"jsonp"}).done(function(n){var e="",t=!0,i=!1,a=void 0;try{for(var o,s=n.result[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){e+="\n                            <aside>"+o.value[0]+"</aside>\n                        "}}catch(n){i=!0,a=n}finally{try{!t&&s.return&&s.return()}finally{if(i)throw a}}c(".search .result").html(e)})})},searchGood:function(){c(".result").on("click",function(n){"ASIDE"===n.target.nodeName&&(c(".search_value").val(c(n.target).html()),c(".search .result").html(""),c(document).on("blur",function(){c(".search .result").html("")}))})},showChat:function(){c(".chat").hover(function(){c(this).children("img").show()},function(){c(this).children("img").hide()})},stairsShow:function(){1e3<=c("html,body").scrollTop()?c(".stairs").show():c(".stairs").hide()},rightSidebar:function(){var n=this;this.stairsShow(),c(document).on("scroll",function(){n.stairsShow()})},weChat:function(){c(".wechat").hover(function(){c(".wechat img").show()},function(){c(".wechat img").hide()})},loginBox:function(){+c.cookie("flag")&&c(".login_box").html('\n                    <img class="img2" src="http://i0.mbscss.com/img/moonbasa2/member/default-head.jpg" alt="">\n                    <p class="username">用户名:'+c.cookie("username")+'</p>\n                    <p class="usertype">会员类型:普通客户</p>\n                '),c("#user").hover(function(){c(".login_box").show()},function(){c(".login_box").hide()}),c.cookie("num")&&c(".shopcount").html(c.cookie("num").split(",").map(function(n){return+n}).reduce(function(n,e){return n+e})),c("#left_sidebar").on("mouseover",function(n){c(n.target).parents("section").is(".cartList")||c(n.target).is(".sideBar")||c(n.target).is(".sideBar p")?c(".cartList").show():c(".cartList").hide()}),c(".cartList").on("mouseout",function(){c(".cartList").hide()})}}});