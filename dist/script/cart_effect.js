"use strict";define(["jquery","jqcookie"],function(s){return{clickEvent:function(){var h=this;s(".good_content").on("click",function(e){if(s(e.target).is(".add")){var o=s(e.target).index(".add");s(".good_num").eq(o).val(+s(".good_num").eq(s(e.target).index(".add")).val()+1),s(".total_price").eq(o).html("￥"+s(".single_price").eq(o).html().replace("￥","")*s(".good_num").eq(o).val()),s(".choose").eq(o).prop("checked",!0),h.setCheck(),h.setNum(),h.changeNum(s(".good_num").eq(o).val(),o)}if(s(e.target).is(".del")){var c=s(e.target).index(".del"),t=+s(".good_num").eq(s(e.target).index(".del")).val()-1;t=t<=0?0:t--,s(".good_num").eq(c).val(t),0!=t?s(".total_price").eq(c).html("￥"+s(".single_price").eq(c).html().replace("￥","")*t):(s(".total_price").eq(c).html(0),s(".choose").eq(c).prop("checked",!1),h.setCheck()),h.setNum(),h.changeNum(s(".good_num").eq(c).val(),c)}if(s(e.target).is(".choose")&&(s(e.target).prop("checked")||s("#allcheck").prop("checked",!1),h.setCheck()),s(e.target).is(".remove")){var i=s(e.target).index(".remove"),n=s.cookie("color").split(","),r=s.cookie("size").split(","),l=s.cookie("sid").split(","),a=s.cookie("num").split(",");i=h.findIndex(i),n.splice(i,1),r.splice(i,1),l.splice(i,1),a.splice(i,1),s.cookie("num",a,{expires:7,path:"/"}),s.cookie("sid",l,{expires:7,path:"/"}),s.cookie("color",n,{expires:7,path:"/"}),s.cookie("size",r,{expires:7,path:"/"}),s(".shop_content").eq(s(e.target).index(".remove")).remove(),s.each(s(".good_content aside"),function(e,o){0==s(o).children(".shop_content").length&&s(o).remove()}),h.setNum(),h.setCheck()}}),s(".good_content").on("input",function(e){var o=this;if(s(e.target).is(".good_num")){var c=s(e.target).index(".good_num"),t=s(e.target).val();0!=t?(s(".total_price").eq(c).html("￥"+s(".single_price").eq(c).html().replace("￥","")*t),o.setNum()):(s(".total_price").eq(c).html(0),o.setNum(),o.setCheck())}})},checkAll:function(){var e=this;s("#allcheck").on("click",function(){s(this).prop("checked")?s(".choose").prop("checked",!0):s(".choose").prop("checked",!1),e.setNum()})},setCheck:function(){var c=!1;s.each(s(".choose"),function(e,o){if(!s(o).prop("checked"))return!(c=!0)}),c?s("#allcheck").prop("checked",!1):s("#allcheck").prop("checked",!0)},setNum:function(){var t=0,i=0;s.each(s(".choose:checked"),function(e,o){var c=s(".choose").index(o);i+=+s(".good_num").eq(c).val(),t+=+s(".total_price").eq(c).html().replace("￥","")}),0!=i?s(".sum").html("￥"+i):s(".sum").html(0),0!=t?s("#total_price").html("￥"+t):s("#total_price").html(0)},changeNum:function(e,o){var c=s.cookie("num").split(",");c[this.findIndex(o)]=e,s.cookie("num",c,{expires:7,path:"/"})},isCheck:function(){s.each(s(".good_num"),function(e,o){0!=s(this).val()&&s(".choose").eq(e).prop("checked",!0)})},findIndex:function(e){var o=s.cookie("color").split(","),c=s.cookie("size").split(","),t=s(".cColor").eq(e).html().replace("颜色:",""),i=s(".cSize").eq(e).html().replace("尺寸:",""),n=0;return s.each(o,function(e,o){if(t==o&&c[e]==i)return n=e,!1}),n}}});