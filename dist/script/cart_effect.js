"use strict";define(["jquery","jqcookie"],function(s){return{clickEvent:function(){var h=this;s(".good_content").on("click",function(e){if(s(e.target).is(".add")){var t=s(e.target).index(".add");s(".good_num").eq(t).val(+s(".good_num").eq(s(e.target).index(".add")).val()+1),s(".total_price").eq(t).html("￥"+s(".single_price").eq(t).html().replace("￥","")*s(".good_num").eq(t).val()),s(".choose").eq(t).prop("checked",!0),h.setCheck(),h.setNum(),h.changeNum(s(".good_num").eq(t).val(),t)}if(s(e.target).is(".del")){var o=s(e.target).index(".del"),c=+s(".good_num").eq(s(e.target).index(".del")).val()-1;c=c<=0?0:c--,s(".good_num").eq(o).val(c),0!=c?s(".total_price").eq(o).html("￥"+s(".single_price").eq(o).html().replace("￥","")*c):(s(".total_price").eq(o).html(0),s(".choose").eq(o).prop("checked",!1),h.setCheck()),h.setNum(),h.changeNum(s(".good_num").eq(o).val(),o)}if(s(e.target).is(".choose")&&(s(e.target).prop("checked")||s("#allcheck").prop("checked",!1),h.setCheck(),h.setNum()),s(e.target).is(".remove")&&confirm("你确定要删除吗")){var i=s(e.target).index(".remove"),n=s.cookie("color").split(","),r=s.cookie("size").split(","),l=s.cookie("sid").split(","),a=s.cookie("num").split(",");i=h.findIndex(i),n.splice(i,1),r.splice(i,1),l.splice(i,1),a.splice(i,1),s.cookie("num",a,{expires:7,path:"/"}),s.cookie("sid",l,{expires:7,path:"/"}),s.cookie("color",n,{expires:7,path:"/"}),s.cookie("size",r,{expires:7,path:"/"}),s(".shop_content").eq(s(e.target).index(".remove")).remove(),s.each(s(".good_content aside"),function(e,t){0==s(t).children(".shop_content").length&&s(t).remove()}),h.setNum(),h.setCheck(),h.emptyCart()}}),s(".good_content").on("input",function(e){if(s(e.target).is(".good_num")){var t=s(e.target).index(".good_num"),o=s(e.target).val();0!=o?s(".total_price").eq(t).html("￥"+s(".single_price").eq(t).html().replace("￥","")*o):s(".total_price").eq(t).html(0),this.setNum()}})},checkAll:function(){var e=this;s("#allcheck").on("click",function(){s(this).prop("checked")?s(".choose").prop("checked",!0):s(".choose").prop("checked",!1),e.setNum()})},setCheck:function(){var o=!0;o=0!=s(".good_content").children("aside").length,s.each(s(".choose"),function(e,t){if(!s(t).prop("checked"))return o=!1}),o?s("#allcheck").prop("checked",!0):s("#allcheck").prop("checked",!1)},setNum:function(){var c=0,i=0;s.each(s(".choose:checked"),function(e,t){var o=s(".choose").index(t);i+=+s(".good_num").eq(o).val(),c+=+s(".total_price").eq(o).html().replace("￥","")}),0!=i?s(".sum").html("￥"+i):s(".sum").html(0),0!=c?s("#total_price").html("￥"+c):s("#total_price").html(0)},changeNum:function(e,t){var o=s.cookie("num").split(",");o[this.findIndex(t)]=e,s.cookie("num",o,{expires:7,path:"/"})},isCheck:function(){s.each(s(".good_num"),function(e,t){0!=s(this).val()&&s(".choose").eq(e).prop("checked",!0)})},findIndex:function(e){var t=s.cookie("color").split(","),o=s.cookie("size").split(","),c=s(".cColor").eq(e).html().replace("颜色:",""),i=s(".cSize").eq(e).html().replace("尺寸:",""),n=0;return s.each(t,function(e,t){if(c==t&&o[e]==i)return n=e,!1}),n},settleMent:function(){var t=this;s(".deal").on("click",function(e){s(e.target).is(".settle")&&(+s.cookie("flag")?0!=s(".sum").html().replace("￥","")?confirm("您确认要购买选中的商品吗?")&&(alert("购买成功"),s(".good_content aside").remove(),t.setNum(),t.setCheck(),t.emptyCart(),s.cookie("num","",{expires:-1,path:"/"}),s.cookie("color","",{expires:-1,path:"/"}),s.cookie("size","",{expires:-1,path:"/"}),s.cookie("sid","",{expires:-1,path:"/"})):alert("您还没有选择商品哦!请您先选择商品"):confirm("您还没有登录,请先登录")&&(location.href="http://10.31.155.75/mbs/dist/login.html"))})},emptyCart:function(){0==s(".good_content").children("aside").length&&s(".deal").html("\n                    <p class='empty'>您的购物车空空如也,快去挑选一些商品吧</p>\n                    <a href='http://10.31.155.75/mbs/dist/'>去首页</a>\n                ")}}});